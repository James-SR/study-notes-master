<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Study notes</title>
  <meta name="description" content="Study notes taken from courses and self learning.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Study notes" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://github.com/James-SR/study-notes-master" />
  
  <meta property="og:description" content="Study notes taken from courses and self learning." />
  <meta name="github-repo" content="James-SR/study-notes-master" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Study notes" />
  
  <meta name="twitter:description" content="Study notes taken from courses and self learning." />
  

<meta name="author" content="James Solomon-Rounce">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="joining-data-in-r-with-dplyr.html">
<link rel="next" href="importing-cleaning-data-in-r-case-studies.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Study Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html"><i class="fa fa-check"></i><b>1</b> Importing data - Part 1</a><ul>
<li class="chapter" data-level="1.1" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#reading-csv-files"><i class="fa fa-check"></i><b>1.2</b> Reading CSV files</a></li>
<li class="chapter" data-level="1.3" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#reading-tab-deliminated-files-or-other-table-formats"><i class="fa fa-check"></i><b>1.3</b> Reading tab deliminated files or other table formats</a></li>
<li class="chapter" data-level="1.4" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#readr-and-data.table"><i class="fa fa-check"></i><b>1.4</b> Readr and data.table</a><ul>
<li class="chapter" data-level="1.4.1" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#data.table-fread"><i class="fa fa-check"></i><b>1.4.1</b> data.table fread</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#reading-excel-files"><i class="fa fa-check"></i><b>1.5</b> Reading Excel files</a><ul>
<li class="chapter" data-level="1.5.1" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#alternatives-for-importing-excel-files"><i class="fa fa-check"></i><b>1.5.1</b> Alternatives for importing Excel files</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#xlconnect---read-and-write-to-excel"><i class="fa fa-check"></i><b>1.6</b> XLConnect - read and write to excel</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html"><i class="fa fa-check"></i><b>2</b> Importing data - Part 2</a><ul>
<li class="chapter" data-level="2.1" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#importing-from-databases---1"><i class="fa fa-check"></i><b>2.1</b> Importing from Databases - 1</a></li>
<li class="chapter" data-level="2.2" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#sql-queries-inside-r"><i class="fa fa-check"></i><b>2.2</b> SQL Queries Inside R</a></li>
<li class="chapter" data-level="2.3" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#web-data"><i class="fa fa-check"></i><b>2.3</b> Web Data</a></li>
<li class="chapter" data-level="2.4" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#json-and-apis"><i class="fa fa-check"></i><b>2.4</b> JSON and APIs</a></li>
<li class="chapter" data-level="2.5" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#importing-from-other-statistical-software"><i class="fa fa-check"></i><b>2.5</b> Importing from other statistical software</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="3" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html"><i class="fa fa-check"></i><b>3</b> Joining Data in R with dplyr</a><ul>
<li class="chapter" data-level="3.1" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#mutating-joins"><i class="fa fa-check"></i><b>3.1</b> Mutating joins</a><ul>
<li class="chapter" data-level="3.1.1" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#keys"><i class="fa fa-check"></i><b>3.1.1</b> Keys</a></li>
<li class="chapter" data-level="3.1.2" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#left-and-right-joins"><i class="fa fa-check"></i><b>3.1.2</b> Left and right joins</a></li>
<li class="chapter" data-level="3.1.3" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#inner-and-full-joins"><i class="fa fa-check"></i><b>3.1.3</b> Inner and full joins</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#filtering-joins-and-set-operations"><i class="fa fa-check"></i><b>3.2</b> Filtering joins and set operations</a></li>
<li class="chapter" data-level="3.3" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#set-operations"><i class="fa fa-check"></i><b>3.3</b> Set Operations</a></li>
<li class="chapter" data-level="3.4" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#bind-in-dplyr"><i class="fa fa-check"></i><b>3.4</b> Bind in Dplyr</a><ul>
<li class="chapter" data-level="3.4.1" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#data-frames"><i class="fa fa-check"></i><b>3.4.1</b> Data frames</a></li>
<li class="chapter" data-level="3.4.2" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#data-types"><i class="fa fa-check"></i><b>3.4.2</b> Data Types</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#advanced-joining"><i class="fa fa-check"></i><b>3.5</b> Advanced Joining</a></li>
<li class="chapter" data-level="3.6" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#joining-mutiple-tables"><i class="fa fa-check"></i><b>3.6</b> Joining mutiple tables</a></li>
<li class="chapter" data-level="3.7" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#other-implentations"><i class="fa fa-check"></i><b>3.7</b> Other implentations</a></li>
<li class="chapter" data-level="3.8" data-path="joining-data-in-r-with-dplyr.html"><a href="joining-data-in-r-with-dplyr.html#case-study---lahman-db"><i class="fa fa-check"></i><b>3.8</b> Case Study - Lahman DB</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cleaning-data.html"><a href="cleaning-data.html"><i class="fa fa-check"></i><b>4</b> Cleaning Data</a><ul>
<li class="chapter" data-level="4.1" data-path="cleaning-data.html"><a href="cleaning-data.html#tidying-data"><i class="fa fa-check"></i><b>4.1</b> Tidying data</a></li>
<li class="chapter" data-level="4.2" data-path="cleaning-data.html"><a href="cleaning-data.html#preparing-data-for-analysis"><i class="fa fa-check"></i><b>4.2</b> Preparing data for analysis</a></li>
<li class="chapter" data-level="4.3" data-path="cleaning-data.html"><a href="cleaning-data.html#string-manipulation"><i class="fa fa-check"></i><b>4.3</b> String manipulation</a></li>
<li class="chapter" data-level="4.4" data-path="cleaning-data.html"><a href="cleaning-data.html#missing-specials-and-outliers"><i class="fa fa-check"></i><b>4.4</b> Missing, Specials and Outliers</a></li>
<li class="chapter" data-level="4.5" data-path="cleaning-data.html"><a href="cleaning-data.html#examples"><i class="fa fa-check"></i><b>4.5</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html"><i class="fa fa-check"></i><b>5</b> Importing &amp; Cleaning Data in R: Case Studies</a><ul>
<li class="chapter" data-level="5.1" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#ticket-sales-data"><i class="fa fa-check"></i><b>5.1</b> Ticket Sales Data</a><ul>
<li class="chapter" data-level="5.1.1" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#removing-redundant-info"><i class="fa fa-check"></i><b>5.1.1</b> Removing redundant info</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#working-with-dates"><i class="fa fa-check"></i><b>5.2</b> Working with dates</a></li>
<li class="chapter" data-level="5.3" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#mbta-ridership-data"><i class="fa fa-check"></i><b>5.3</b> MBTA Ridership Data</a></li>
<li class="chapter" data-level="5.4" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#world-food-facts"><i class="fa fa-check"></i><b>5.4</b> World Food Facts</a></li>
<li class="chapter" data-level="5.5" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#school-attendance-data"><i class="fa fa-check"></i><b>5.5</b> School Attendance Data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-data.html"><a href="introduction-to-data.html"><i class="fa fa-check"></i><b>6</b> Introduction to Data</a><ul>
<li class="chapter" data-level="6.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#language-of-data"><i class="fa fa-check"></i><b>6.1</b> Language of Data</a></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#observational-studies-and-experiments"><i class="fa fa-check"></i><b>6.2</b> Observational Studies and Experiments</a></li>
<li class="chapter" data-level="6.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#sampling-strategies-and-experimental-design"><i class="fa fa-check"></i><b>6.3</b> Sampling strategies and experimental design</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="7" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html"><i class="fa fa-check"></i><b>7</b> Foundations of Inference</a><ul>
<li class="chapter" data-level="7.1" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#introduction-to-inference"><i class="fa fa-check"></i><b>7.1</b> Introduction to Inference</a></li>
<li class="chapter" data-level="7.2" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#home-ownership-by-gender"><i class="fa fa-check"></i><b>7.2</b> Home Ownership by Gender</a></li>
<li class="chapter" data-level="7.3" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#density-plots"><i class="fa fa-check"></i><b>7.3</b> Density Plots</a></li>
<li class="chapter" data-level="7.4" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#gender-discrimination-p-values"><i class="fa fa-check"></i><b>7.4</b> Gender Discrimination (p-values)</a></li>
<li class="chapter" data-level="7.5" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#opportunity-cost"><i class="fa fa-check"></i><b>7.5</b> Opportunity Cost</a></li>
<li class="chapter" data-level="7.6" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#type-i-and-type-ii-errors"><i class="fa fa-check"></i><b>7.6</b> Type I and Type II errors</a></li>
<li class="chapter" data-level="7.7" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#bootstrapping"><i class="fa fa-check"></i><b>7.7</b> Bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-2.html"><a href="references-2.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>8</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="8.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#categorical-data"><i class="fa fa-check"></i><b>8.1</b> Categorical Data</a></li>
<li class="chapter" data-level="8.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#numerical-data"><i class="fa fa-check"></i><b>8.2</b> Numerical Data</a></li>
<li class="chapter" data-level="8.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#numerical-summaries"><i class="fa fa-check"></i><b>8.3</b> Numerical Summaries</a><ul>
<li class="chapter" data-level="8.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#transformations"><i class="fa fa-check"></i><b>8.3.1</b> Transformations</a></li>
<li class="chapter" data-level="8.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#outliers"><i class="fa fa-check"></i><b>8.3.2</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#email-case-study"><i class="fa fa-check"></i><b>8.4</b> Email Case Study</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html"><i class="fa fa-check"></i><b>9</b> Correlation and Regression</a><ul>
<li class="chapter" data-level="9.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#visualizing-two-variables"><i class="fa fa-check"></i><b>9.1</b> Visualizing two variables</a><ul>
<li class="chapter" data-level="9.1.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#transformations-1"><i class="fa fa-check"></i><b>9.1.1</b> Transformations</a></li>
<li class="chapter" data-level="9.1.2" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#identifying-outliers"><i class="fa fa-check"></i><b>9.1.2</b> Identifying Outliers</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#correlation"><i class="fa fa-check"></i><b>9.2</b> Correlation</a><ul>
<li class="chapter" data-level="9.2.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#anscombe-dataset"><i class="fa fa-check"></i><b>9.2.1</b> Anscombe Dataset</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#linear-regression"><i class="fa fa-check"></i><b>9.3</b> Linear Regression</a><ul>
<li class="chapter" data-level="9.3.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#regression-to-the-mean"><i class="fa fa-check"></i><b>9.3.1</b> Regression to the Mean</a></li>
<li class="chapter" data-level="9.3.2" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#fitting-linear-models"><i class="fa fa-check"></i><b>9.3.2</b> Fitting linear models</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#model-fit"><i class="fa fa-check"></i><b>9.4</b> Model fit</a><ul>
<li class="chapter" data-level="9.4.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#unusual-points"><i class="fa fa-check"></i><b>9.4.1</b> Unusual points</a></li>
<li class="chapter" data-level="9.4.2" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#high-leverage-points"><i class="fa fa-check"></i><b>9.4.2</b> High leverage Points</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>10</b> Supervised Learning</a><ul>
<li class="chapter" data-level="10.1" data-path="supervised-learning.html"><a href="supervised-learning.html#tree-based-models"><i class="fa fa-check"></i><b>10.1</b> Tree Based Models</a><ul>
<li class="chapter" data-level="10.1.1" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forests"><i class="fa fa-check"></i><b>10.1.1</b> Random Forests</a></li>
<li class="chapter" data-level="10.1.2" data-path="supervised-learning.html"><a href="supervised-learning.html#one-hot-encoding-categorical-variables"><i class="fa fa-check"></i><b>10.1.2</b> One-Hot-Encoding Categorical Variables</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="supervised-learning.html"><a href="supervised-learning.html#gradient-boosting-machines"><i class="fa fa-check"></i><b>10.2</b> Gradient Boosting Machines</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html"><i class="fa fa-check"></i><b>11</b> Dimensional Modelling</a><ul>
<li class="chapter" data-level="11.1" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#introduction-to-dimensional-data"><i class="fa fa-check"></i><b>11.1</b> Introduction to Dimensional Data</a><ul>
<li class="chapter" data-level="11.1.1" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#data-modelling-levels"><i class="fa fa-check"></i><b>11.1.1</b> Data Modelling levels</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#architecture-considerations"><i class="fa fa-check"></i><b>11.2</b> Architecture considerations</a></li>
<li class="chapter" data-level="11.3" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#graphical-representations"><i class="fa fa-check"></i><b>11.3</b> Graphical Representations</a></li>
<li class="chapter" data-level="11.4" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#kimball-approach"><i class="fa fa-check"></i><b>11.4</b> Kimball Approach</a></li>
<li class="chapter" data-level="11.5" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#four-step-dimensional-design-process"><i class="fa fa-check"></i><b>11.5</b> Four-Step Dimensional Design Process</a></li>
<li class="chapter" data-level="11.6" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#tips"><i class="fa fa-check"></i><b>11.6</b> Tips</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-3.html"><a href="references-3.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Study notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cleaning-data" class="section level1">
<h1><span class="header-section-number">4</span> Cleaning Data</h1>
<hr />
<p>Notes taken during/inspired by the Datacamp course ‘Cleaning Data in R’ by Nick Carchedi.</p>
<div id="tidying-data" class="section level2">
<h2><span class="header-section-number">4.1</span> Tidying data</h2>
<p>In Hadley’s paper on tidy data, he talked about how columns in a data frame should be variables or attributes and rows should be observations - this somestimes does not happen if there are things like dummy variables as columns, that could be collpased in to a single column. The entire data table (data frame) should be about one particular set of data i.e. we have countries without an embedded table about cats.</p>
<p>Hadley introduced the tidyr package to try and help clean some data. There are two fundamental verbs of data tidying:</p>
<ul>
<li><p><strong>gather()</strong> takes multiple columns, and gathers them into key-value pairs: it makes “wide” data longer</p></li>
<li><p><strong>spread()</strong> takes two columns (key &amp; value) and spreads in to multiple columns, it makes “long” data wider</p></li>
</ul>
<blockquote>
<p>gather(data, key, value …)</p>
</blockquote>
<p><strong>data</strong>: is a data frame</p>
<p><strong>key</strong>: the name of the new key column</p>
<p><strong>value</strong>: the name of the new value column</p>
<p><strong>…</strong>: names of columns to gather or not (if not, state -col e.g. -time to not include the time column in the gathered table)</p>
<blockquote>
<p>spread(data, key, value)</p>
</blockquote>
<p><strong>data</strong>: is a data frame</p>
<p><strong>key</strong>: the name containing the key column</p>
<p><strong>value</strong>: the name containing the value column</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Apply gather() to bmi and save the result as bmi_long</span>
bmi_long &lt;-<span class="st"> </span><span class="kw">gather</span>(bmi, year, bmi_value, <span class="op">-</span>Country)

<span class="co"># Apply spread() to bmi_long</span>
bmi_wide &lt;-<span class="st"> </span><span class="kw">spread</span>(bmi_long, year, bmi_val)</code></pre></div>
<p>Another useful feature is separate(). This takes a single variable and separates it into two separate columns or variable, for instance converting a year-month (2015-10) into a separate column for year and month.</p>
<blockquote>
<p>separate(data, col, into, sep = “”)</p>
</blockquote>
<p><strong>data</strong>: a data frame</p>
<p><strong>col</strong>: bare name of column to separate</p>
<p><strong>into</strong>: charecter vector of new column names</p>
<p><strong>Optional sep = “”</strong>: in the separate command you can designate on what item (/, @ etc) to break the data by. This is optional and can depend on the column type (numeric vs char)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># separate year-mo into two columns</span>
<span class="kw">separate</span>(treatments, year_mo, <span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>))</code></pre></div>
<p>We can also use the unite function to combine two columns together</p>
<blockquote>
<p>unite(data, col, …)</p>
</blockquote>
<p><strong>data</strong>: a data frame</p>
<p><strong>col</strong>: name of the new column</p>
<p><strong>…</strong>: columns to unite</p>
<p>The default seperator within the new column is an underscore, however we can specify something different</p>
<p><strong>Optional sep = “-”</strong>: would add the seperator as a hyphen</p>
<p>head(bmi_cc) Country_ISO year bmi_val 1 Afghanistan/AF Y1980 21.48678 2 Albania/AL Y1980 25.22533 3 Algeria/DZ Y1980 22.25703 4 Andorra/AD Y1980 25.66652 5 Angola/AO Y1980 20.94876 6 Antigua and Barbuda/AG Y1980 23.31424</p>
<p>So to separate Country_ISO into two columns</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Apply separate() to bmi_cc</span>
bmi_cc_clean &lt;-<span class="st"> </span><span class="kw">separate</span>(bmi_cc, <span class="dt">col =</span> Country_ISO, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;Country&quot;</span>, <span class="st">&quot;ISO&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>)

<span class="co"># Apply unite() to bmi_cc_clean aand reverse</span>
bmi_cc &lt;-<span class="st"> </span><span class="kw">unite</span>(bmi_cc_clean, Country_ISO, Country, ISO, <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>)</code></pre></div>
</div>
<div id="preparing-data-for-analysis" class="section level2">
<h2><span class="header-section-number">4.2</span> Preparing data for analysis</h2>
<p>Often we need to convert, or in the case of raw data, create the appropriate data type for each variable prior to analysis. Some common data types include</p>
<ul>
<li><strong>character</strong>: “treatment”, “123”, “A”</li>
<li><strong>numeric</strong>: 23.44, 120, NaN, Inf</li>
<li><strong>integer</strong>: 4L, 1123L</li>
<li><strong>factor</strong>: factor(“Hello”), factor(8)</li>
<li><strong>logical</strong>: TRUE, FALSE, NA</li>
</ul>
<p>We can use the class() function to detmine the variable type, or we can also include a value to determine the appropriate type e.g. class(77L) will return [1] “integer”.</p>
<p>We can also use the coercion functions to change the types, such as as.numeric, as.factor() and as.character().</p>
<p>For dates and times, we can use the lubridate package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the lubridate package</span>
<span class="kw">library</span>(lubridate)

<span class="co"># Parse as date</span>
<span class="kw">dmy</span>(<span class="st">&quot;17 Sep 2015&quot;</span>)

<span class="co"># Parse as date and time (with no seconds!)</span>
<span class="kw">mdy_hm</span>(<span class="st">&quot;July 15, 2012 12:56&quot;</span>)

<span class="co"># Coerce dob to a date (with no time)</span>
students2<span class="op">$</span>dob &lt;-<span class="st"> </span><span class="kw">ymd</span>(students2<span class="op">$</span>dob)

<span class="co"># Coerce nurse_visit to a date and time</span>
students2<span class="op">$</span>nurse_visit &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(students2<span class="op">$</span>nurse_visit)</code></pre></div>
</div>
<div id="string-manipulation" class="section level2">
<h2><span class="header-section-number">4.3</span> String manipulation</h2>
<p>Another useful package is stringr, which like lubridate and other Hadley packages has a consistent interface, providing a range of functions for dealing with strings. Some functions include</p>
<ul>
<li><strong>str_trim()</strong> - Trim leading and trailing white space</li>
<li><strong>str_pad()</strong> - Pad with additional characters</li>
<li><strong>str_detect()</strong> - Detect a pattern</li>
<li><strong>str_replace()</strong> - Find and replace a pattern</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the stringr package</span>
<span class="kw">library</span>(stringr)

<span class="co"># Trim all leading and trailing whitespace</span>
<span class="kw">str_trim</span>(<span class="kw">c</span>(<span class="st">&quot;   Filip &quot;</span>, <span class="st">&quot;Nick  &quot;</span>, <span class="st">&quot; Jonathan&quot;</span>))

<span class="co"># Pad these strings with leading zeros</span>
<span class="kw">str_pad</span>(<span class="kw">c</span>(<span class="st">&quot;23485W&quot;</span>, <span class="st">&quot;8823453Q&quot;</span>, <span class="st">&quot;994Z&quot;</span>), <span class="dt">width =</span> <span class="dv">9</span>, <span class="dt">side =</span> <span class="st">&quot;left&quot;</span>, <span class="dt">pad =</span> <span class="dv">0</span>)

<span class="co"># Detect all dates of birth (dob) in 1997</span>
<span class="kw">str_detect</span>(students2<span class="op">$</span>dob, <span class="st">&quot;1997&quot;</span>)

<span class="co"># In the sex column, replace &quot;F&quot; with &quot;Female&quot;...</span>
students2<span class="op">$</span>sex &lt;-<span class="st">  </span><span class="kw">str_replace</span>(students2<span class="op">$</span>sex, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;Female&quot;</span>)

<span class="co"># ...And &quot;M&quot; with &quot;Male&quot;</span>
students2<span class="op">$</span>sex &lt;-<span class="st"> </span><span class="kw">str_replace</span>(students2<span class="op">$</span>sex, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;Male&quot;</span>)</code></pre></div>
<p>R {base} also has some handy features for strings, including toupper() and tolower().</p>
</div>
<div id="missing-specials-and-outliers" class="section level2">
<h2><span class="header-section-number">4.4</span> Missing, Specials and Outliers</h2>
<p>Generally missing values in R are represented by NA. However, if the data has been imported from other systems, the values can be different, such as a . (dot) if imported from SPSS.</p>
<p>We can use the is.na(df) to return a TRUE/FALSE array of where there are NA values in a data frame. Or, for large datasets, we can use the any(is.na(df)) to return a true or false if there is an NA anywhere in the data frame.</p>
<p>Alternatively we can use the sum(is.na(df)) to count how many NAs are in the dataframe. Use complete.cases() to see which rows have no missing values.</p>
<p>Special values include inf for infinite value, NaN for Not a number.</p>
<p>Outliers are best detected by measures such as the IQR or other nuemrical measures (see the EDA section), by using a boxplot or a histogram/density plot. There are a number of likely reasons for an outlier:</p>
<p><em>Valid measurements </em>Variability in measurement <em>Experimental error </em>Data entry error</p>
<p>May be discarded or retained depending on cause. In some instances we may want to cap, or put a limit on, the maximum number the outlier can. Looking at the actual values and considering possible values can help, for instance negative age values or a perons age above 200 are not plausible values. However, they may be data entry errors or in the case of negative numbers, represent a deliberately coded missing value.</p>
</div>
<div id="examples" class="section level2">
<h2><span class="header-section-number">4.5</span> Examples</h2>
<p>The weather dataset suffers from one of the five most common symptoms of messy data: column names are values. In particular, the column names X1-X31 represent days of the month, which should really be values of a new variable called day.</p>
<p>head(weather)</p>
<table>
<thead>
<tr class="header">
<th>X</th>
<th>year</th>
<th>month</th>
<th align="left">measure</th>
<th>X1</th>
<th>X2</th>
<th>X3</th>
<th>X4</th>
<th>X5</th>
<th>X6</th>
<th>X7</th>
<th>X8</th>
<th>X9</th>
<th>X10</th>
<th>X11</th>
<th>X12</th>
<th>X13</th>
<th>X14</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2014</td>
<td>12</td>
<td align="left">Max.TemperatureF</td>
<td>64</td>
<td>42</td>
<td>51</td>
<td>43</td>
<td>42</td>
<td>45</td>
<td>38</td>
<td>29</td>
<td>49</td>
<td>48</td>
<td>39</td>
<td>39</td>
<td>42</td>
<td>45</td>
</tr>
<tr class="even">
<td>2</td>
<td>2014</td>
<td>12</td>
<td align="left">Mean.TemperatureF</td>
<td>52</td>
<td>38</td>
<td>44</td>
<td>37</td>
<td>34</td>
<td>42</td>
<td>30</td>
<td>24</td>
<td>39</td>
<td>43</td>
<td>36</td>
<td>35</td>
<td>37</td>
<td>39</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2014</td>
<td>12</td>
<td align="left">Min.TemperatureF</td>
<td>39</td>
<td>33</td>
<td>37</td>
<td>30</td>
<td>26</td>
<td>38</td>
<td>21</td>
<td>18</td>
<td>29</td>
<td>38</td>
<td>32</td>
<td>31</td>
<td>32</td>
<td>33</td>
</tr>
<tr class="even">
<td>4</td>
<td>2014</td>
<td>12</td>
<td align="left">Max.Dew.PointF</td>
<td>46</td>
<td>40</td>
<td>49</td>
<td>24</td>
<td>37</td>
<td>45</td>
<td>36</td>
<td>28</td>
<td>49</td>
<td>45</td>
<td>37</td>
<td>28</td>
<td>28</td>
<td>29</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the tidyr package</span>
<span class="kw">library</span>(tidyr)

<span class="co"># Gather the columns</span>
weather2 &lt;-<span class="st"> </span><span class="kw">gather</span>(weather, day, value, X1<span class="op">:</span>X31, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>becomes</p>
<table>
<thead>
<tr class="header">
<th>X</th>
<th>year</th>
<th>month</th>
<th align="left">measure</th>
<th>day</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2014</td>
<td>12</td>
<td align="left">Max.TemperatureF</td>
<td>X1</td>
<td>64</td>
</tr>
<tr class="even">
<td>2</td>
<td>2014</td>
<td>12</td>
<td align="left">Mean.TemperatureF</td>
<td>X1</td>
<td>52</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2014</td>
<td>12</td>
<td align="left">Min.TemperatureF</td>
<td>X1</td>
<td>39</td>
</tr>
<tr class="even">
<td>4</td>
<td>2014</td>
<td>12</td>
<td align="left">Max.Dew.PointF</td>
<td>X1</td>
<td>46</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2014</td>
<td>12</td>
<td align="left">MeanDew.PointF</td>
<td>X1</td>
<td>40</td>
</tr>
<tr class="even">
<td>6</td>
<td>2014</td>
<td>12</td>
<td align="left">Min.DewpointF</td>
<td>X1</td>
<td>26</td>
</tr>
</tbody>
</table>
<p>Our data suffer from a second common symptom of messy data: values are variable names. Specifically, values in the measure column should be variables (i.e. column names) in our dataset. WE also have an additional column (X) which is not needed as it is just the row number.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First remove column of row names</span>
weather2 &lt;-<span class="st"> </span>weather2[, <span class="op">-</span><span class="dv">1</span>]

<span class="co"># Spread the data</span>
weather3 &lt;-<span class="st"> </span><span class="kw">spread</span>(weather2, measure, value)</code></pre></div>
<table>
<caption><span id="tab:simple-table">Table 3.1: </span></caption>
<thead>
<tr class="header">
<th>year</th>
<th align="left">month</th>
<th>day</th>
<th>CloudCover</th>
<th align="right">Events</th>
<th>Max.Dew.PointF</th>
<th>Max.Gust.SpeedMPH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2014</td>
<td align="left">12</td>
<td>X1</td>
<td>6</td>
<td align="right">Rain</td>
<td>46</td>
<td>29</td>
</tr>
<tr class="even">
<td>2014</td>
<td align="left">12</td>
<td>X2</td>
<td>7</td>
<td align="right">Rain-Snow</td>
<td>40</td>
<td>29</td>
</tr>
<tr class="odd">
<td>2014</td>
<td align="left">12</td>
<td>X3</td>
<td>8</td>
<td align="right">Rain</td>
<td>49</td>
<td>38</td>
</tr>
<tr class="even">
<td>2014</td>
<td align="left">12</td>
<td>X4</td>
<td>3</td>
<td align="right"></td>
<td>24</td>
<td>33</td>
</tr>
<tr class="odd">
<td>2014</td>
<td align="left">12</td>
<td>X5</td>
<td>5</td>
<td align="right">Rain</td>
<td>37</td>
<td>26</td>
</tr>
<tr class="even">
<td>2014</td>
<td align="left">12</td>
<td>X6</td>
<td>8</td>
<td align="right">Rain</td>
<td>45</td>
<td>25</td>
</tr>
<tr class="odd">
<td>…</td>
<td align="left"></td>
<td></td>
<td></td>
<td align="right"></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Now that the weather dataset adheres to tidy data principles, the next step is to prepare it for analysis. We’ll start by combining the year, month, and day columns and recoding the resulting character column as a date. We can use a combination of base R, stringr, and lubridate to accomplish this task.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Remove X&#39;s from day column</span>
weather3<span class="op">$</span>day &lt;-<span class="st"> </span><span class="kw">str_replace</span>(weather3<span class="op">$</span>day, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;&quot;</span>)

<span class="co"># Unite the year, month, and day columns</span>
weather4 &lt;-<span class="st"> </span><span class="kw">unite</span>(weather3, date, year, month, day, <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>)

<span class="co"># Convert date column to proper date format using lubridates&#39;s ymd()</span>
weather4<span class="op">$</span>date &lt;-<span class="st"> </span><span class="kw">ymd</span>(weather4<span class="op">$</span>date)

<span class="co"># Rearrange columns using dplyr&#39;s select()</span>
weather5 &lt;-<span class="st"> </span><span class="kw">select</span>(weather4, date, Events, CloudCover<span class="op">:</span>WindDirDegrees)</code></pre></div>
<p>It’s important for analysis that variables are coded appropriately. This is not yet the case with our weather data. Recall that functions such as as.numeric() and as.character() can be used to coerce variables into different types.</p>
<p>It’s important to keep in mind that coercions are not always successful, particularly if there’s some data in a column that you don’t expect. For example, the following will cause problems:</p>
<p>as.numeric(c(4, 6.44, “some string”, 222))</p>
<p>So you can use the str_replace function to change character values to something else.</p>
<p>If we have missing data, we can use indices and is.na function to identify then only see those rows with NA values on a variable of interest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Count missing values</span>
<span class="kw">sum</span>(<span class="kw">is.na</span>(weather6))

<span class="co"># Find missing values</span>
<span class="kw">summary</span>(weather6)

<span class="co"># Find indices of NAs in Max.Gust.SpeedMPH</span>
ind &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">is.na</span>(weather6<span class="op">$</span>Max.Gust.SpeedMPH))

<span class="co"># Look at the full rows for records missing Max.Gust.SpeedMPH</span>
weather6[ind, ]</code></pre></div>
<p>Besides missing values, we want to know if there are values in the data that are too extreme or bizarre to be plausible. A great way to start the search for these values is with summary().</p>
<p>Once implausible values are identified, they must be dealt with in an intelligent and informed way. Sometimes the best way forward is obvious and other times it may require some research and/or discussions with the original collectors of the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Find row with Max.Humidity of 1000</span>
ind &lt;-<span class="st"> </span><span class="kw">which</span>(weather6<span class="op">$</span>Max.Humidity <span class="op">==</span><span class="st"> </span><span class="dv">1000</span>)

<span class="co"># Look at the data for that day</span>
weather6[ind, ]

<span class="co"># Change 1000 to 100</span>
weather6<span class="op">$</span>Max.Humidity[ind] &lt;-<span class="st"> </span><span class="dv">100</span></code></pre></div>
<p>Before officially calling our weather data clean, we want to put a couple of finishing touches on the data. These are a bit more subjective and may not be necessary for analysis, but they will make the data easier for others to interpret, which is generally a good thing.</p>
<p>There are a number of stylistic conventions in the R language. Depending on who you ask, these conventions may vary. Because the period (.) has special meaning in certain situations, we generally recommend using underscores (_) to separate words in variable names. We also prefer all lowercase letters so that no one has to remember which letters are uppercase or lowercase.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="joining-data-in-r-with-dplyr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importing-cleaning-data-in-r-case-studies.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["Study-Notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
