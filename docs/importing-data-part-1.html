<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Study notes</title>
  <meta name="description" content="Study notes taken from courses and self learning.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Study notes" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://github.com/James-SR/study-notes-master" />
  
  <meta property="og:description" content="Study notes taken from courses and self learning." />
  <meta name="github-repo" content="James-SR/study-notes-master" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Study notes" />
  
  <meta name="twitter:description" content="Study notes taken from courses and self learning." />
  

<meta name="author" content="James Solomon-Rounce">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="importing-data-part-2.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Study Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html"><i class="fa fa-check"></i><b>1</b> Importing data - Part 1</a><ul>
<li class="chapter" data-level="1.1" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#reading-csv-files"><i class="fa fa-check"></i><b>1.2</b> Reading CSV files</a></li>
<li class="chapter" data-level="1.3" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#reading-tab-deliminated-files-or-other-table-formats"><i class="fa fa-check"></i><b>1.3</b> Reading tab deliminated files or other table formats</a></li>
<li class="chapter" data-level="1.4" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#readr-and-data.table"><i class="fa fa-check"></i><b>1.4</b> Readr and data.table</a><ul>
<li class="chapter" data-level="1.4.1" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#data.table-fread"><i class="fa fa-check"></i><b>1.4.1</b> data.table fread</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#reading-excel-files"><i class="fa fa-check"></i><b>1.5</b> Reading Excel files</a><ul>
<li class="chapter" data-level="1.5.1" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#alternatives-for-importing-excel-files"><i class="fa fa-check"></i><b>1.5.1</b> Alternatives for importing Excel files</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="importing-data-part-1.html"><a href="importing-data-part-1.html#xlconnect---read-and-write-to-excel"><i class="fa fa-check"></i><b>1.6</b> XLConnect - read and write to excel</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html"><i class="fa fa-check"></i><b>2</b> Importing data - Part 2</a><ul>
<li class="chapter" data-level="2.1" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#importing-from-databases---1"><i class="fa fa-check"></i><b>2.1</b> Importing from Databases - 1</a></li>
<li class="chapter" data-level="2.2" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#sql-queries-inside-r"><i class="fa fa-check"></i><b>2.2</b> SQL Queries Inside R</a></li>
<li class="chapter" data-level="2.3" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#web-data"><i class="fa fa-check"></i><b>2.3</b> Web Data</a></li>
<li class="chapter" data-level="2.4" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#json-and-apis"><i class="fa fa-check"></i><b>2.4</b> JSON and APIs</a></li>
<li class="chapter" data-level="2.5" data-path="importing-data-part-2.html"><a href="importing-data-part-2.html#importing-from-other-statistical-software"><i class="fa fa-check"></i><b>2.5</b> Importing from other statistical software</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="3" data-path="cleaning-data.html"><a href="cleaning-data.html"><i class="fa fa-check"></i><b>3</b> Cleaning Data</a><ul>
<li class="chapter" data-level="3.1" data-path="cleaning-data.html"><a href="cleaning-data.html#tidying-data"><i class="fa fa-check"></i><b>3.1</b> Tidying data</a></li>
<li class="chapter" data-level="3.2" data-path="cleaning-data.html"><a href="cleaning-data.html#preparing-data-for-analysis"><i class="fa fa-check"></i><b>3.2</b> Preparing data for analysis</a></li>
<li class="chapter" data-level="3.3" data-path="cleaning-data.html"><a href="cleaning-data.html#string-manipulation"><i class="fa fa-check"></i><b>3.3</b> String manipulation</a></li>
<li class="chapter" data-level="3.4" data-path="cleaning-data.html"><a href="cleaning-data.html#missing-specials-and-outliers"><i class="fa fa-check"></i><b>3.4</b> Missing, Specials and Outliers</a></li>
<li class="chapter" data-level="3.5" data-path="cleaning-data.html"><a href="cleaning-data.html#examples"><i class="fa fa-check"></i><b>3.5</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html"><i class="fa fa-check"></i><b>4</b> Importing &amp; Cleaning Data in R: Case Studies</a><ul>
<li class="chapter" data-level="4.1" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#ticket-sales-data"><i class="fa fa-check"></i><b>4.1</b> Ticket Sales Data</a><ul>
<li class="chapter" data-level="4.1.1" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#removing-redundant-info"><i class="fa fa-check"></i><b>4.1.1</b> Removing redundant info</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#working-with-dates"><i class="fa fa-check"></i><b>4.2</b> Working with dates</a></li>
<li class="chapter" data-level="4.3" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#mbta-ridership-data"><i class="fa fa-check"></i><b>4.3</b> MBTA Ridership Data</a></li>
<li class="chapter" data-level="4.4" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#world-food-facts"><i class="fa fa-check"></i><b>4.4</b> World Food Facts</a></li>
<li class="chapter" data-level="4.5" data-path="importing-cleaning-data-in-r-case-studies.html"><a href="importing-cleaning-data-in-r-case-studies.html#school-attendance-data"><i class="fa fa-check"></i><b>4.5</b> School Attendance Data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introduction-to-data.html"><a href="introduction-to-data.html"><i class="fa fa-check"></i><b>5</b> Introduction to Data</a><ul>
<li class="chapter" data-level="5.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#language-of-data"><i class="fa fa-check"></i><b>5.1</b> Language of Data</a></li>
<li class="chapter" data-level="5.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#observational-studies-and-experiments"><i class="fa fa-check"></i><b>5.2</b> Observational Studies and Experiments</a></li>
<li class="chapter" data-level="5.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#sampling-strategies-and-experimental-design"><i class="fa fa-check"></i><b>5.3</b> Sampling strategies and experimental design</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="6" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html"><i class="fa fa-check"></i><b>6</b> Foundations of Inference</a><ul>
<li class="chapter" data-level="6.1" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#introduction-to-inference"><i class="fa fa-check"></i><b>6.1</b> Introduction to Inference</a></li>
<li class="chapter" data-level="6.2" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#home-ownership-by-gender"><i class="fa fa-check"></i><b>6.2</b> Home Ownership by Gender</a></li>
<li class="chapter" data-level="6.3" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#density-plots"><i class="fa fa-check"></i><b>6.3</b> Density Plots</a></li>
<li class="chapter" data-level="6.4" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#gender-discrimination-p-values"><i class="fa fa-check"></i><b>6.4</b> Gender Discrimination (p-values)</a></li>
<li class="chapter" data-level="6.5" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#opportunity-cost"><i class="fa fa-check"></i><b>6.5</b> Opportunity Cost</a></li>
<li class="chapter" data-level="6.6" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#type-i-and-type-ii-errors"><i class="fa fa-check"></i><b>6.6</b> Type I and Type II errors</a></li>
<li class="chapter" data-level="6.7" data-path="foundations-of-inference.html"><a href="foundations-of-inference.html#bootstrapping"><i class="fa fa-check"></i><b>6.7</b> Bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-2.html"><a href="references-2.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>7</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#categorical-data"><i class="fa fa-check"></i><b>7.1</b> Categorical Data</a></li>
<li class="chapter" data-level="7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#numerical-data"><i class="fa fa-check"></i><b>7.2</b> Numerical Data</a></li>
<li class="chapter" data-level="7.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#numerical-summaries"><i class="fa fa-check"></i><b>7.3</b> Numerical Summaries</a><ul>
<li class="chapter" data-level="7.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#transformations"><i class="fa fa-check"></i><b>7.3.1</b> Transformations</a></li>
<li class="chapter" data-level="7.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#outliers"><i class="fa fa-check"></i><b>7.3.2</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#email-case-study"><i class="fa fa-check"></i><b>7.4</b> Email Case Study</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html"><i class="fa fa-check"></i><b>8</b> Correlation and Regression</a><ul>
<li class="chapter" data-level="8.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#visualizing-two-variables"><i class="fa fa-check"></i><b>8.1</b> Visualizing two variables</a><ul>
<li class="chapter" data-level="8.1.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#transformations-1"><i class="fa fa-check"></i><b>8.1.1</b> Transformations</a></li>
<li class="chapter" data-level="8.1.2" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#identifying-outliers"><i class="fa fa-check"></i><b>8.1.2</b> Identifying Outliers</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#correlation"><i class="fa fa-check"></i><b>8.2</b> Correlation</a><ul>
<li class="chapter" data-level="8.2.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#anscombe-dataset"><i class="fa fa-check"></i><b>8.2.1</b> Anscombe Dataset</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#linear-regression"><i class="fa fa-check"></i><b>8.3</b> Linear Regression</a><ul>
<li class="chapter" data-level="8.3.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#regression-to-the-mean"><i class="fa fa-check"></i><b>8.3.1</b> Regression to the Mean</a></li>
<li class="chapter" data-level="8.3.2" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#fitting-linear-models"><i class="fa fa-check"></i><b>8.3.2</b> Fitting linear models</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#model-fit"><i class="fa fa-check"></i><b>8.4</b> Model fit</a><ul>
<li class="chapter" data-level="8.4.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#unusual-points"><i class="fa fa-check"></i><b>8.4.1</b> Unusual points</a></li>
<li class="chapter" data-level="8.4.2" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#high-leverage-points"><i class="fa fa-check"></i><b>8.4.2</b> High leverage Points</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>9</b> Supervised Learning</a><ul>
<li class="chapter" data-level="9.1" data-path="supervised-learning.html"><a href="supervised-learning.html#tree-based-models"><i class="fa fa-check"></i><b>9.1</b> Tree Based Models</a><ul>
<li class="chapter" data-level="9.1.1" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forests"><i class="fa fa-check"></i><b>9.1.1</b> Random Forests</a></li>
<li class="chapter" data-level="9.1.2" data-path="supervised-learning.html"><a href="supervised-learning.html#one-hot-encoding-categorical-variables"><i class="fa fa-check"></i><b>9.1.2</b> One-Hot-Encoding Categorical Variables</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="supervised-learning.html"><a href="supervised-learning.html#gradient-boosting-machines"><i class="fa fa-check"></i><b>9.2</b> Gradient Boosting Machines</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html"><i class="fa fa-check"></i><b>10</b> Dimensional Modelling</a><ul>
<li class="chapter" data-level="10.1" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#introduction-to-dimensional-data"><i class="fa fa-check"></i><b>10.1</b> Introduction to Dimensional Data</a><ul>
<li class="chapter" data-level="10.1.1" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#data-modelling-levels"><i class="fa fa-check"></i><b>10.1.1</b> Data Modelling levels</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#architecture-considerations"><i class="fa fa-check"></i><b>10.2</b> Architecture considerations</a></li>
<li class="chapter" data-level="10.3" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#graphical-representations"><i class="fa fa-check"></i><b>10.3</b> Graphical Representations</a></li>
<li class="chapter" data-level="10.4" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#kimball-approach"><i class="fa fa-check"></i><b>10.4</b> Kimball Approach</a></li>
<li class="chapter" data-level="10.5" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#four-step-dimensional-design-process"><i class="fa fa-check"></i><b>10.5</b> Four-Step Dimensional Design Process</a></li>
<li class="chapter" data-level="10.6" data-path="dimensional-modelling.html"><a href="dimensional-modelling.html#tips"><i class="fa fa-check"></i><b>10.6</b> Tips</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-3.html"><a href="references-3.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Study notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="importing-data---part-1" class="section level1">
<h1><span class="header-section-number">1</span> Importing data - Part 1</h1>
<hr />
<p>Notes taken during/inspired by the Datacamp course ‘Importing Data in R (Part 1)’ by Filip Schouwenaars.</p>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">1.1</span> Introduction</h2>
<p>Data often comes from many different sources and formats, including</p>
<ul>
<li>Flat files - simple tables e.g. csv</li>
<li>Excel</li>
<li>Databases - MySQL, Postgres</li>
<li>Websites - APIs, JSON, scraping</li>
<li>Other statistical software - SPSS, STATA, SAS</li>
</ul>
</div>
<div id="reading-csv-files" class="section level2">
<h2><span class="header-section-number">1.2</span> Reading CSV files</h2>
<p>Reading csv files can be achived with simple code like</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read.csv</span>(<span class="st">&quot;file.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>We may want to import strings as categorical variables, in which case we would set stringsAsFactors = TRUE which is also the default option, if not stated.</p>
<p>When working across different machines or operating systems, problems can arise due to different ways of addressing file locations and differing file locations. Therefore, it can be easier to set a relative path to the users home directory, which would be achieved with the following code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="st">&quot;~&quot;</span>, <span class="st">&quot;datasets&quot;</span>, <span class="st">&quot;file.csv&quot;</span>)
path</code></pre></div>
<pre><code>## [1] &quot;~/datasets/file.csv&quot;</code></pre>
<p>Then use the file path as before, assigning to a dataframe.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(path, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="reading-tab-deliminated-files-or-other-table-formats" class="section level2">
<h2><span class="header-section-number">1.3</span> Reading tab deliminated files or other table formats</h2>
<p>In a similar way to before, we add the path to the file and if we want strings as strings, for instance</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read.delim</span>(<span class="st">&quot;file.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>However, if the file comes in another format perhaps due to the system encoding or setup, it is still possible to try and read the file as a tabular formatting converting it to a data frame. To do so, we use the read.table() command which has a lot of arguments that can be customised. You can specify column names and types for instance. If for instance we have a file format where the objects are separated by a / rather than a comma or tab as before, we could use</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read.table</span>(<span class="st">&quot;file.txt&quot;</span>,
           <span class="dt">header =</span> <span class="ot">TRUE</span>,
           <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>,
           <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Or, if you have a file which has no column/variable names and tabs as spaces, you would read the file as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Path to the file.txt file: path</span>
path &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;file.txt&quot;</span>)

<span class="co"># Import the file.txt file: hotdogs</span>
file &lt;-<span class="st"> </span><span class="kw">read.table</span>(path, 
                      <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>,                                        <span class="co"># specify seperator - tab in this instance</span>
                      <span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">&quot;VarName1&quot;</span>, <span class="st">&quot;VarName2&quot;</span>, <span class="st">&quot;VarName3&quot;</span>), <span class="co"># specifiy variable names</span>
                      <span class="dt">colClasses =</span> <span class="kw">c</span>(<span class="st">&quot;factor&quot;</span>, <span class="st">&quot;NULL&quot;</span>, <span class="st">&quot;numeric&quot;</span>))       <span class="co"># specify the column/variable classes</span></code></pre></div>
<p>Both read.csv and read.delim are wrapper functions of read.table(), both use read.table but have different default options depending on the file type. There are two further wrapper functions - read.csv2 and read.delim2 - which deal with regional differences in formatting, notably that some areas use full stops as decimal places, whereas other areas use commas for decimal places.</p>
</div>
<div id="readr-and-data.table" class="section level2">
<h2><span class="header-section-number">1.4</span> Readr and data.table</h2>
<p>These two packages are other ways of reading in files. Readr uses the tibble, so will be compatible with other tidyverse packages such as dplyr. It is faster than utils, the r default and also prints out the column classes, depending on what other packages are loaded. It is not necessary to specify stringsAsFactors = FALSE.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)
<span class="kw">read_csv</span>(<span class="st">&quot;file.csv&quot;</span>)    <span class="co">#read comma seperated</span>
<span class="kw">read_tsv</span>(<span class="st">&quot;file2.txt&quot;</span>)   <span class="co">#read tab seperated files</span>

<span class="co">#If there are no row heads, you can create a vector then read it in using the col_names argument</span>

<span class="co">#specify the vector for column names</span>
properties &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;area&quot;</span>, <span class="st">&quot;temp&quot;</span>, <span class="st">&quot;size&quot;</span>, <span class="st">&quot;storage&quot;</span>, <span class="st">&quot;method&quot;</span>,
                <span class="st">&quot;texture&quot;</span>, <span class="st">&quot;flavor&quot;</span>, <span class="st">&quot;moistness&quot;</span>)
<span class="co">#read in the vector</span>
df &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;file3.txt&quot;</span>, <span class="dt">col_names =</span> properties)</code></pre></div>
<p>Like the utils package, these are wrapper functions, with the base function being read_delim(). Unlike the utils package, read_delim() expects the first row to contain headers, so this doesn’t need to be explicit. As mentioned previously, it is also not necessary to specify the we don’t want strings as factors. You can specify col_names using a vector as before, or we can read them directly at the time. If we also want to explicitly state the column types, perahps because the automatically assigned variable is not correct, we can do so with col_type using abbreviations:</p>
<ul>
<li>c = character</li>
<li>d = double</li>
<li>i = integer</li>
<li>n = number</li>
<li>l = logical</li>
<li>D = date</li>
<li>T = date time</li>
<li>t = time</li>
<li>? = guess</li>
<li>_ = skip column (underscore)</li>
</ul>
<p>Finally, we can use skip and n_max to specify how many rows to skip at the beginning of a file, perhaps due to a large header, and the maximum now of rows to read, perhaps due to a very large file with many rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read_delim</span>(<span class="st">&quot;file4.txt&quot;</span>, <span class="dt">delim =</span> <span class="st">&quot;/&quot;</span>, <span class="dt">col_names =</span> <span class="kw">c</span>(<span class="st">&quot;var1&quot;</span>, <span class="st">&quot;var2&quot;</span>, <span class="st">&quot;var3&quot;</span>))

<span class="kw">read_delim</span>(<span class="st">&quot;file5.txt&quot;</span>, <span class="dt">delim =</span> <span class="st">&quot;/&quot;</span>, <span class="dt">col_types =</span> <span class="st">&quot;ccid&quot;</span>)

<span class="kw">read_delim</span>(<span class="st">&quot;file6.txt&quot;</span>, <span class="dt">delim =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">col_names =</span> <span class="kw">c</span>(<span class="st">&quot;var1&quot;</span>, <span class="st">&quot;var2&quot;</span>, <span class="st">&quot;var3&quot;</span>), 
           <span class="dt">skip =</span> <span class="dv">12</span>, <span class="dt">n_max =</span> <span class="dv">50000</span>)</code></pre></div>
<p>Another way of setting the types of the imported columns is using collectors. Collector functions can be passed in a list() to the col_types argument of read_ functions to tell them how to interpret values in a column. Look at the collector documentation for more details. Two examples are shown below, one for columns to be interpreted as integers and one for a column with factors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The collectors needed for importing</span>
fac &lt;-<span class="st"> </span><span class="kw">col_factor</span>(<span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Beef&quot;</span>, <span class="st">&quot;Meat&quot;</span>, <span class="st">&quot;Poultry&quot;</span>))
int &lt;-<span class="st"> </span><span class="kw">col_integer</span>()

<span class="co"># Edit the col_types argument with the specified collectors</span>
hotdogs_factor &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;hotdogs.txt&quot;</span>,
                           <span class="dt">col_names =</span> <span class="kw">c</span>(<span class="st">&quot;type&quot;</span>, <span class="st">&quot;calories&quot;</span>, <span class="st">&quot;sodium&quot;</span>),
                           <span class="dt">col_types =</span> <span class="kw">list</span>(fac, int, int))</code></pre></div>
<div id="data.table-fread" class="section level3">
<h3><span class="header-section-number">1.4.1</span> data.table fread</h3>
<p>data.table is a tool for doing <a href="https://github.com/Rdatatable/data.table/wiki/Benchmarks-%3A-Grouping">fast data analysis</a>, particularly on large datasets. It also has a function to read data using the fread() command. It can automatically infer column names, types and separators. You can also drop or select columns at read time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;file7.csv&quot;</span>, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;colname1&quot;</span>, <span class="st">&quot;colname2&quot;</span>))</code></pre></div>
<p>The readr package fill create different dataframe types or object classes - ‘tbl_df’, ‘tbl’ and ‘data.frame’ - which can be useful for different purposes, such as for use in dplyr. Fread creates a data.table object class.</p>
</div>
</div>
<div id="reading-excel-files" class="section level2">
<h2><span class="header-section-number">1.5</span> Reading Excel files</h2>
<p>There are many packages for reading Excel files, one package is the readxl package by Hadley Wickham. There are to main functions</p>
<ul>
<li><strong>excel_sheets()</strong>: lists the sheets within an excel file or workbook</li>
<li><strong>read_excel()</strong>: import the data, unless specified the first sheet is read, this can either be done with sheet = 7, or sheet = “name”.</li>
</ul>
<p>So to read an urbanpop.xlsx file containing three sheets of urban populations, for different time frames, our code would look similar to that below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)

<span class="co">#list the sheerts in the file</span>
<span class="kw">excel_sheets</span>(<span class="st">&quot;urbanpop.xlsx&quot;</span>)

<span class="co"># Read the sheets, one by one</span>
pop_1 &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;urbanpop.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="dv">1</span>)
pop_2 &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;urbanpop.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="dv">2</span>)
pop_3 &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;urbanpop.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="dv">3</span>)

<span class="co"># Put pop_1, pop_2 and pop_3 in a list: pop_list</span>
pop_list &lt;-<span class="st"> </span><span class="kw">list</span>(pop_1, pop_2, pop_3)

<span class="co"># IF we want to read all the files, a more efficient way to read all the files in the file uses lapply</span>
pop_list &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">excel_sheets</span>(<span class="st">&quot;urbanpop.xlsx&quot;</span>),
  read_excel,
  <span class="dt">path =</span> <span class="st">&quot;urbanpop.xlsx&quot;</span>)</code></pre></div>
<p>There are other arguments that can be used with the read_excel() function:</p>
<ul>
<li><strong>col_names</strong>: If true, the first row is read, if false R will assign it’s own names or you specify a charecter vector manually</li>
<li><strong>col_types</strong>: If NULL, R gueses the data types of the columns. Alternatively, they can be specified e.g. text, numeric, date, blank (which ignores the col)</li>
<li><strong>skip</strong>: Speficies the number of rows to ignore</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Some examples</span>

<span class="co"># Import the the first Excel sheet of urbanpop_nonames.xlsx (R gives names): pop_a</span>
pop_a &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;urbanpop_nonames.xlsx&quot;</span>, <span class="dt">col_names =</span> <span class="ot">FALSE</span>)

<span class="co"># Import the the first Excel sheet of urbanpop_nonames.xlsx (specify col_names): pop_b</span>
cols &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;country&quot;</span>, <span class="kw">paste0</span>(<span class="st">&quot;year_&quot;</span>, <span class="dv">1960</span>:<span class="dv">1966</span>))
pop_b &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;urbanpop_nonames.xlsx&quot;</span>, <span class="dt">col_names =</span> cols)

<span class="co"># Import the second sheet of urbanpop.xlsx, skipping the first 21 rows: urbanpop_sel</span>
urbanpop_sel &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;urbanpop.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="dv">2</span>, <span class="dt">col_names =</span> <span class="ot">FALSE</span>, <span class="dt">skip =</span> <span class="dv">21</span>)

<span class="co"># Print out the first observation from urbanpop_sel</span>
urbanpop_sel[<span class="dv">1</span>,]</code></pre></div>
<div id="alternatives-for-importing-excel-files" class="section level3">
<h3><span class="header-section-number">1.5.1</span> Alternatives for importing Excel files</h3>
<p>One alternative is the gdata package, which is a suite of tools for data. There is a read.xls() function which only, currently, supports XLS files although xlsx could be supported with a driver. The data is interpreted by the read.xls file using perl into a csv file, which is then read using the read.csv function - itself a offshoot of read.table, in to an R data frame. Hadley’s readxl package is faster, but is quite early in it’s development so some of the functions may change. For gdata, as it is an offshoot of read.table(), all of the same arguments can be used by read.xls().</p>
</div>
</div>
<div id="xlconnect---read-and-write-to-excel" class="section level2">
<h2><span class="header-section-number">1.6</span> XLConnect - read and write to excel</h2>
<p>Most of the Excel tools can become accessible but inside R, using XLConnect. It is possible to use XLS and XLSX and it will create a ‘workbook’ object in R, but it does require Java to work.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(XLConnect)

<span class="co">#create a connect to a file and list the sheets</span>
book &lt;-<span class="st"> </span><span class="kw">loadWorkbook</span>(<span class="st">&quot;file.xlsx&quot;</span>)
<span class="kw">getSheets</span>(book)

<span class="co">#read in the specific sheet but only the columns we are interested in</span>
wardData &lt;-<span class="st"> </span><span class="kw">readWorksheet</span>(book, <span class="dt">sheet =</span> <span class="st">&quot;sheet_1&quot;</span>, <span class="dt">startCol =</span> <span class="dv">3</span>, <span class="dt">endCol =</span> <span class="dv">5</span>)

<span class="co"># read in the names column, previoulsy excluded</span>
wardNames &lt;-<span class="st"> </span><span class="kw">readWorksheet</span>(my_book, <span class="dt">sheet =</span> <span class="dv">2</span>, <span class="dt">startCol =</span> <span class="dv">1</span>, <span class="dt">endCol =</span> <span class="dv">1</span>)

<span class="co">#cbind the data and names together</span>
selection &lt;-<span class="st"> </span><span class="kw">cbind</span>(wardNames, wardData)</code></pre></div>
<p>XLConnect has more features than simply reading sheets. It is possible to write data back to the Excel file also. We can add sheets, write or add data to sheets, rename and remove sheets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Add a worksheet to my_book, named &quot;summary&quot;</span>
<span class="kw">createSheet</span>(my_book, <span class="st">&quot;summary&quot;</span>)

<span class="co"># Add data in summ to &quot;data_summary&quot; sheet</span>
<span class="kw">writeWorksheet</span>(my_book, summ, <span class="st">&quot;summary&quot;</span>)

<span class="co"># Save workbook as summary.xlsx</span>
<span class="kw">saveWorkbook</span>(my_book, <span class="st">&quot;summary.xlsx&quot;</span>)

<span class="co"># Rename &quot;summary&quot; sheet to &quot;data_summary&quot;</span>
<span class="kw">renameSheet</span>(my_book, <span class="dt">sheet =</span> <span class="dv">4</span>, <span class="st">&quot;data_summary&quot;</span>)

<span class="co"># Remove the third sheet</span>
<span class="kw">removeSheet</span>(my_book, <span class="dt">sheet =</span> <span class="dv">3</span>)</code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importing-data-part-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["Study-Notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
